import React, {useState } from 'react';
import './VoiceListItem.css';

function VoiceListItem(props) {

    const [isSpeechSynthesisActive, setIsSpeechSynthesisActive] = useState(false);

    const handleStartPauseSpeech = () => {
        if (!isSpeechSynthesisActive) {
            const utterance = new SpeechSynthesisUtterance("Hello my name is " + props.voice.name);
            utterance.voice = props.voice;
            window.speechSynthesis.speak(utterance);
            setIsSpeechSynthesisActive(true);
        } else {
            window.speechSynthesis.cancel();
            setIsSpeechSynthesisActive(false);
        }
    };
    
    return (
        <div className={`voice-list-item ${props.selected ? 'selected' : ''}`}>
            <input
                type="checkbox"
                id={`voice-${props.voice.name}`}
                value={props.voice.name}
                checked={props.selected}
                onChange={props.onChange}
            />
            <label htmlFor={`voice-${props.voice.name}`}>
                <div className="circle"></div>
                <span>{props.displayName}</span>
            </label>
            <svg
                className="play-button-list"
                onClick={handleStartPauseSpeech}
                viewBox="0 0 216 168" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M120.465 0.550754C123.799 1.64485 125.965 4.18571 125.965 6.99999V161C125.965 163.819 123.79 166.365 120.448 167.455C117.105 168.546 113.248 167.969 110.662 165.994L58.0009 125.744H26.9926C12.0851 125.744 0 116.341 0 104.744V62.8981C0 51.3003 12.0851 41.8982 26.9926 41.8982H58.0232L110.69 1.98589C113.281 0.0219744 117.132 -0.543345 120.465 0.550754ZM175.231 14.8285L176.789 15.6517L178.549 16.8357C179.68 17.6271 181.242 18.7736 183.092 20.2678C186.787 23.2524 191.656 27.6504 196.515 33.4077C206.239 44.9313 216 62.0107 216 84.0566C216 106.104 206.238 123.158 196.508 134.656C191.647 140.4 186.776 144.785 183.08 147.76L180.538 149.733L177.177 152.099L176.584 152.478C172.688 154.879 167.016 154.376 163.929 151.347C161.193 148.659 161.4 144.89 164.201 142.398L166.526 140.753C167.365 140.169 168.615 139.258 170.141 138.03C173.199 135.569 177.332 131.857 181.478 126.959C189.758 117.171 198.005 102.753 198.005 84.0566C198.005 65.3585 189.758 50.91 181.471 41.0912C178.016 36.9964 174.568 33.726 171.744 31.3189L168.699 28.8511L165.382 26.4793C161.5 24.0704 160.85 19.6631 163.944 16.6401C166.695 13.9517 171.472 13.2582 175.231 14.8285ZM107.97 23.591L67.9592 53.9124C66.2792 55.1857 64.0266 55.8982 61.6811 55.8982H26.9926C22.0235 55.8982 17.9951 59.0322 17.9951 62.8981V104.744C17.9951 108.61 22.0235 111.744 26.9926 111.744H61.6811C64.0397 111.744 66.304 112.465 67.9865 113.75L107.97 144.31V23.591ZM157.25 42.8271L159.042 43.8034L161.447 45.5637L162.42 46.3566C164.462 48.0706 167.097 50.5814 169.706 53.92C174.951 60.6334 180.028 70.6214 180.028 83.9796C180.028 97.3374 174.951 107.336 169.709 114.059C167.104 117.402 164.469 119.92 162.429 121.637L160.601 123.097L159.336 124.007L158.621 124.479L157.478 124.883C155.096 125.625 149.525 126.835 145.976 123.38C143.232 120.71 143.409 116.956 146.172 114.454L148.592 112.645L149.211 112.137C150.552 111.009 152.425 109.235 154.324 106.798C158.095 101.962 162.033 94.4452 162.033 83.9796C162.033 73.5148 158.095 66.013 154.329 61.1925C152.905 59.3712 151.496 57.9218 150.317 56.8375L148.603 55.3693L147.37 54.4592C143.507 52.0622 142.871 47.666 145.963 44.6423C148.713 41.9531 153.49 41.258 157.25 42.8271Z" fill="#D9D9D9" />
            </svg>
        </div>
    );
}

export default VoiceListItem;